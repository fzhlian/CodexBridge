https://ministers-usr-solutions-stanford.trycloudflare.com/wecom/callback

开启新的gpt聊天：
开新会话
贴 PROJECT_CONTEXT.md
贴 CURRENT_MILESTONE.md
3 秒钟我就能完全进入状态。

我在开发 CodexBridge，这是项目上下文：
PROJECT_CONTEXT.md
当前任务：
CURRENT_MILESTONE.md
实现 Approve & Run All Git Sync UX。

待完善：
同步此项目到github


发出：审核代码、同步github，实际只是规划没有执行。
帮我把项目跟github同名项目进行同步。
帮我把项目的chat的ui换成codex样式的。


换行应该是alt+enter
4、如果上一条聊天没有完成，又发出另外一条，就把这条放入队列中，等待上一条完成，再发送这条。
5、每个聊天卡片添加复制图标，点击后复制卡片内容到剪贴板。






1) Codex 扩展为什么能“自动执行”？
Codex VS Code 扩展（或 Codex App）本质上是一个完整代理系统，里面包含：
自然语言 → 任务路由（判断是同步/提交/推送等）
工具层（Tools）：git 操作、文件读写、终端命令等
权限与审批（Approval）：在 UI 里引导你确认或默认允许某些低风险动作
执行器（Executor）：真正去跑 git status / add / commit / push 等
回传与可视化：把执行过程流式展示
你现在调用的 app-server 只负责“和 Codex 的智能部分对话 + 事件流”，但你不自动提供同等的工具执行环境，它就只能停留在“提出建议/生成计划”。

已修改：
status=sent_to_agent 不再作为被动回复文本发给企业微信。
2、如果命令由于超时被丢弃，在输出和微信端有反馈丢弃情况。
3、中继收到企业微信指令需要回复握手信息。

3、在apply是否执行的对话框中用客户微信端命令代替commandId，并增加换行。
4、patch命令会生成一个commandid，但对这个id进行apply时又会生成新的commandid，两个id不一致，导致无法apply。

2、解决在 Codex 执行阶段耗时长的问题。
1、命令支持中文，不用@dev开头，反馈给企业微信的也不再用[CodexBridge]开头。可以直接企业微信开启自然语言对话。

1、提供多语言支持，包括vscode的扩展说明和配置，vscode的设置界面显示语言决定后续的命令及提示显示语言。
2、打包发布新的版本，同步github。

1、所有的命令，不论事chat端用户输入的，还是企业微信端输入后注入的，status、help等agent自身命令，不传给codex，按原先流程返回信息，在chat里展现并反馈给企业微信。
2、通信逻辑：企业微信端发出的消息，chat注入、显示并通过企业微信返回消息；chat端用户输入的，只显示不通过企业微信返回。ui界面需区分企业微信端注入消息和用户手工输入消息。

1、全面核实多语言支持，目前支持中文和英文，后续可以通过资源文件加入其它语言。
2、多语言支持包括扩展程序本身的名字和描述等信息。本扩展英文名字为：CodexBridgeAgent，中文名为Codex远程助手。
55525

> 按 `SPEC-NL.md` 实现 Natural Language Task Engine：新增 Task Router、Task State Machine、Proposal/Approval Gate、UI 事件流扩展、WeCom 输出策略。保持现有 DSL 指令兼容，同时支持 `@dev <自然语言>`。所有 apply/run 必须本机确认。先实现 deterministic router + explain/change/run/diagnose/search/review 的最小闭环，再逐步增强。

Apply the three patches above to chat.html, styles.css, and chat.js. Ensure the webview still boots without errors. Verify that: (1) normal messages still render, (2) task_start creates a task card, (3) task_state updates the task card status + logs, (4) task_stream_chunk appends to the task card stream, (5) task_proposal renders proposal actions for diff/command, (6) task_end finalizes the card and disables destructive buttons.

Apply all three patches (chat.html/styles.css/chat.js) and ensure the webview renders task cards for task_* events. Remove any dead CSS for conversation-status. Run typecheck/lint. Fix any missing UI_STRINGS keys by providing safe defaults.

1、企业微信端发送“同步项目到github”，收到英文回复，应本地化资源文件，然后chat没有反应，也没有执行。